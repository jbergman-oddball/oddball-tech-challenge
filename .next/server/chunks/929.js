exports.id=929,exports.ids=[929],exports.modules={17616:(e,t,a)=>{"use strict";a.d(t,{g1:()=>s,nS:()=>o,pp:()=>c});var r=a(91199);a(42087);var n=a(31371);async function i(e){let{db:t}=(0,n.j)(),a=process.env.SMTP_FROM_EMAIL;if(!a)return void console.error("SMTP_FROM_EMAIL is not configured. Cannot send email.");let r=t.collection("mail");try{await r.add({to:[e.to],message:{subject:e.subject,text:e.text,html:e.html},from:`"CodeAlchemist" <${a}>`})}catch(e){throw console.error("Failed to write email document to Firestore:",e),Error("Failed to queue email for sending.")}}async function o(e,t){let a={to:e,subject:"Your CodeAlchemist Account is Pending Approval",text:`Hi ${t},

Thank you for signing up for CodeAlchemist. Your account is currently pending approval from an administrator. You will receive another email once your account has been activated.

Best,
The CodeAlchemist Team`,html:`<p>Hi ${t},</p><p>Thank you for signing up for CodeAlchemist. Your account is currently pending approval from an administrator. You will receive another email once your account has been activated.</p><p>Best,<br/>The CodeAlchemist Team</p>`};await i(a)}async function s(e,t,a){let r={to:e,subject:"New User Needs Approval",text:`A new user has signed up and requires approval.

Name: ${t}
Email: ${a}

Please visit the user management dashboard to approve or deny their request.`,html:`<p>A new user has signed up and requires approval.</p><ul><li><strong>Name:</strong> ${t}</li><li><strong>Email:</strong> ${a}</li></ul><p>Please visit the user management dashboard to approve or deny their request.</p>`};await i(r)}async function c(e,t){let a={to:e,subject:"Your CodeAlchemist Account is Approved!",text:`Hi ${t},

Your CodeAlchemist account has been approved! You can now log in and access all the features.

Best,
The CodeAlchemist Team`,html:`<p>Hi ${t},</p><p>Your CodeAlchemist account has been approved! You can now log in and access all the features.</p><p>Best,<br/>The CodeAlchemist Team</p>`};await i(a)}(0,a(33331).D)([o,s,c]),(0,r.A)(o,"608173103742f32efd1da892360db73cdaaef122a6",null),(0,r.A)(s,"70e925b67c25380f93af1d62da2a372c12b796522a",null),(0,r.A)(c,"60c8117a3370da6824c0381d4887ab7b65956f0306",null)},23764:(e,t,a)=>{"use strict";a.r(t),a.d(t,{"00459d7f21b82008b774543bbd27be680e666da3cd":()=>P,"00a80c757f71a0fd44cb8badcc51f6d76a12b456b4":()=>F,"403276f02a1a338daa22568e8b6f4e85f638507e5e":()=>z,"4056c8bfe61d581a094c28548e0370e7b7c6097338":()=>S,"4079774fa95ae63bbe53ea869b93b1e277f645dc51":()=>I,"40d777309179f5dc18b477ea98f4f31d5d8b68dab4":()=>j});var r=a(91199);a(42087);var n=a(74208),i=a(37612),o=a(9203);let s=(0,i.genkit)({plugins:[(0,o.YF)()],model:"googleai/gemini-2.0-flash"});var c=a(68567);let l=c.z.object({resume:c.z.string().describe("The candidate's resume text."),jobTitle:c.z.string().describe("The job title for which the candidate is being evaluated.")}),d=c.z.object({challengeDescription:c.z.string().describe("A detailed description of the coding challenge, tailored to the candidate."),requiredSkills:c.z.string().describe("A comma seperated list of the required skills for the challenge"),setupInstructions:c.z.string().describe("Instructions on how to setup the project in vscode.dev")}),u=c.z.object({prompt:c.z.string().describe("The prompt for creating a coding challenge.")}),p=c.z.object({challengeDescription:c.z.string().describe("The detailed description of the coding challenge."),setupInstructions:c.z.string().describe("Instructions for setting up the coding environment in VSCode.dev."),expectedOutput:c.z.string().describe("The expected output or solution for the challenge.")});var h=a(33331);async function m(e){return f(e)}let b=s.definePrompt({name:"generateCustomChallengePrompt",input:{schema:l},output:{schema:d},prompt:`You are an expert in creating coding challenges for technical interviews. Given a candidate's resume and the job title they are applying for, create a coding challenge that assesses their skills and abilities.

Resume: {{{resume}}}
Job Title: {{{jobTitle}}}

Consider the candidate's skills and experience when designing the challenge. The challenge should be relevant to the job title and should assess the candidate's ability to solve problems, write clean code, and communicate their solutions effectively. Provide setup instructions for vscode.dev

Output the challenge description, required skills, and setup instructions in JSON format.  The required skills should be comma seperated.
`}),f=s.defineFlow({name:"generateCustomChallengeFlow",inputSchema:l,outputSchema:d},async e=>{let{output:t}=await b(e);return t});async function g(e){return A(e)}(0,h.D)([m]),(0,r.A)(m,"405f3efde9a16f3f1ac8821ea417a74ccc675fe96f",null);let v=s.definePrompt({name:"promptChallengeCreationPrompt",input:{schema:u},output:{schema:p},prompt:`You are an expert coding challenge designer. An interviewer has requested a challenge based on the prompt below. Your job is to generate a detailed coding challenge description, instructions for setting up the coding environment in VSCode.dev, and the expected output or solution for the challenge.

Prompt: {{{prompt}}}`}),A=s.defineFlow({name:"promptChallengeCreationFlow",inputSchema:u,outputSchema:p},async e=>{let{output:t}=await v(e);return t});(0,h.D)([g]),(0,r.A)(g,"4082fb85b62a1b7405d46e511ea53a4389d81b5fba",null);let w=c.z.object({candidateName:c.z.string().min(2,{message:"Name must be at least 2 characters."}),candidateEmail:c.z.string().email({message:"Please enter a valid email."}),jobTitle:c.z.string().min(2,{message:"Job title must be at least 2 characters."}),resume:c.z.string().min(100,{message:"Resume must be at least 100 characters."})}),E=c.z.object({prompt:c.z.string().min(20,{message:"Prompt must be at least 20 characters."})});var y=a(31371),C=a(17616);let T="codealchemist-session";async function j(e){let{db:t}=(0,y.j)(),a=w.safeParse(e);if(!a.success)throw Error("Invalid form data.");let{candidateName:r,candidateEmail:n,jobTitle:i,resume:o}=a.data,s=await m({jobTitle:i,resume:o}),c={candidateName:r,candidateEmail:n,jobTitle:i,...s,status:"Pending",createdAt:new Date};try{await t.collection("challenges").add(c)}catch(e){throw console.error("Error adding document: ",e),Error("Could not save challenge to database.")}return s}async function z(e){let{db:t}=(0,y.j)(),a=E.safeParse(e);if(!a.success)throw Error("Invalid form data.");let r=await g(a.data),n={candidateName:"N/A (Prompted)",candidateEmail:"N/A",jobTitle:"Prompted Challenge",...r,status:"Pending",createdAt:new Date};try{await t.collection("challenges").add(n)}catch(e){throw console.error("Error adding document: ",e),Error("Could not save challenge to database.")}return r}async function I(e){let{auth:t}=(0,y.j)(),a=await t.createSessionCookie(e,{expiresIn:432e6});(0,n.UL)().set(T,a,{maxAge:432e6,httpOnly:!0,secure:!0})}async function F(){(0,n.UL)().delete(T)}async function P(){let{db:e}=(0,y.j)(),t=await e.collection("users").orderBy("createdAt","desc").get(),a=[];return t.forEach(e=>{let t=e.data(),r=t.createdAt.toDate?t.createdAt.toDate():new Date(1e3*t.createdAt._seconds);a.push({...t,createdAt:r})}),a}async function S(e){let{db:t}=(0,y.j)();try{let a=t.collection("users").doc(e),r=await a.get();if(!r.exists)return{success:!1,error:"User not found."};let n=r.data();return await a.update({status:"active",role:"user"}),await (0,C.pp)(n.email,n.name),{success:!0}}catch(e){return console.error("Error approving user:",e),{success:!1,error:"An unexpected error occurred during approval."}}}(0,h.D)([j,z,I,F,P,S]),(0,r.A)(j,"40d777309179f5dc18b477ea98f4f31d5d8b68dab4",null),(0,r.A)(z,"403276f02a1a338daa22568e8b6f4e85f638507e5e",null),(0,r.A)(I,"4079774fa95ae63bbe53ea869b93b1e277f645dc51",null),(0,r.A)(F,"00a80c757f71a0fd44cb8badcc51f6d76a12b456b4",null),(0,r.A)(P,"00459d7f21b82008b774543bbd27be680e666da3cd",null),(0,r.A)(S,"4056c8bfe61d581a094c28548e0370e7b7c6097338",null)},31371:(e,t,a)=>{"use strict";a.d(t,{j:()=>o});var r=a(46675);let n=null;function i(){if(r.apps.length>0){n=r.app();return}if(!r||!r.INTERNAL)return void console.error("Firebase Admin SDK not loaded correctly. 'admin' or 'admin.INTERNAL' is undefined.");let e=process.env.FIREBASE_PROJECT_ID,t=process.env.FIREBASE_PRIVATE_KEY,a=process.env.FIREBASE_CLIENT_EMAIL;if(!e||!t||!a)return void console.error("Firebase Admin SDK environment variables (FIREBASE_PROJECT_ID, FIREBASE_PRIVATE_KEY, FIREBASE_CLIENT_EMAIL) are not set. Please check your .env.local file.");try{n=r.initializeApp({credential:r.credential.cert({projectId:e,privateKey:t,clientEmail:a})}),console.log("Firebase Admin SDK initialized successfully!")}catch(e){throw console.error("Firebase Admin SDK initialization from individual variables failed. Error:",e.message),console.error("Full error object:",e),Error("Firebase Admin SDK initialization failed. Check server logs for details.")}}function o(){if(!n&&(console.log("Firebase Admin App not initialized. Attempting re-initialization..."),i(),!n))throw Error("Firebase Admin SDK is not initialized. Check your environment variables and server logs.");return{auth:r.auth(n),db:r.firestore(n)}}i()},47002:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=47002,e.exports=t}};