(()=>{var e={};e.id=879,e.ids=[879],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},17616:(e,r,t)=>{"use strict";t.d(r,{g1:()=>o,nS:()=>n,pp:()=>l});var a=t(91199);t(42087);var s=t(31371);async function i(e){let{db:r}=(0,s.j)(),t=process.env.SMTP_FROM_EMAIL;if(!t)return void console.error("SMTP_FROM_EMAIL is not configured. Cannot send email.");let a=r.collection("mail");try{await a.add({to:[e.to],message:{subject:e.subject,text:e.text,html:e.html},from:`"CodeAlchemist" <${t}>`})}catch(e){throw console.error("Failed to write email document to Firestore:",e),Error("Failed to queue email for sending.")}}async function n(e,r){let t={to:e,subject:"Your CodeAlchemist Account is Pending Approval",text:`Hi ${r},

Thank you for signing up for CodeAlchemist. Your account is currently pending approval from an administrator. You will receive another email once your account has been activated.

Best,
The CodeAlchemist Team`,html:`<p>Hi ${r},</p><p>Thank you for signing up for CodeAlchemist. Your account is currently pending approval from an administrator. You will receive another email once your account has been activated.</p><p>Best,<br/>The CodeAlchemist Team</p>`};await i(t)}async function o(e,r,t){let a={to:e,subject:"New User Needs Approval",text:`A new user has signed up and requires approval.

Name: ${r}
Email: ${t}

Please visit the user management dashboard to approve or deny their request.`,html:`<p>A new user has signed up and requires approval.</p><ul><li><strong>Name:</strong> ${r}</li><li><strong>Email:</strong> ${t}</li></ul><p>Please visit the user management dashboard to approve or deny their request.</p>`};await i(a)}async function l(e,r){let t={to:e,subject:"Your CodeAlchemist Account is Approved!",text:`Hi ${r},

Your CodeAlchemist account has been approved! You can now log in and access all the features.

Best,
The CodeAlchemist Team`,html:`<p>Hi ${r},</p><p>Your CodeAlchemist account has been approved! You can now log in and access all the features.</p><p>Best,<br/>The CodeAlchemist Team</p>`};await i(t)}(0,t(33331).D)([n,o,l]),(0,a.A)(n,"608173103742f32efd1da892360db73cdaaef122a6",null),(0,a.A)(o,"70e925b67c25380f93af1d62da2a372c12b796522a",null),(0,a.A)(l,"60c8117a3370da6824c0381d4887ab7b65956f0306",null)},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},20941:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=t(65239),s=t(48088),i=t(88170),n=t.n(i),o=t(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d={children:["",{children:["signup",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,38255)),"/home/user/oddball-tech-challenge/src/app/signup/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"/home/user/oddball-tech-challenge/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/oddball-tech-challenge/src/app/signup/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/signup/page",pathname:"/signup",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},21820:e=>{"use strict";e.exports=require("os")},24323:(e,r,t)=>{Promise.resolve().then(t.bind(t,38255))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31371:(e,r,t)=>{"use strict";t.d(r,{j:()=>n});var a=t(46675);let s=null;function i(){if(a.apps.length>0){s=a.app();return}if(!a||!a.INTERNAL)return void console.error("Firebase Admin SDK not loaded correctly. 'admin' or 'admin.INTERNAL' is undefined.");let e=process.env.FIREBASE_PROJECT_ID,r=process.env.FIREBASE_PRIVATE_KEY,t=process.env.FIREBASE_CLIENT_EMAIL;if(!e||!r||!t)return void console.error("Firebase Admin SDK environment variables (FIREBASE_PROJECT_ID, FIREBASE_PRIVATE_KEY, FIREBASE_CLIENT_EMAIL) are not set. Please check your .env.local file.");try{s=a.initializeApp({credential:a.credential.cert({projectId:e,privateKey:r,clientEmail:t})}),console.log("Firebase Admin SDK initialized successfully!")}catch(e){throw console.error("Firebase Admin SDK initialization from individual variables failed. Error:",e.message),console.error("Full error object:",e),Error("Firebase Admin SDK initialization failed. Check server logs for details.")}}function n(){if(!s&&(console.log("Firebase Admin App not initialized. Attempting re-initialization..."),i(),!s))throw Error("Firebase Admin SDK is not initialized. Check your environment variables and server logs.");return{auth:a.auth(s),db:a.firestore(s)}}i()},33784:(e,r,t)=>{"use strict";t.d(r,{db:()=>l,j:()=>o});var a=t(67989),s=t(57782),i=t(75535);let n=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyB4wixkDGhoIjH-lJ2oIn6wIRM2Kd5fTqE",authDomain:"fb-ob-tc.firebaseapp.com",projectId:"fb-ob-tc",storageBucket:"fb-ob-tc.firebasestorage.app",messagingSenderId:"1049997594176",appId:"1:1049997594176:web:a5521929db20505d7dd9a5",measurementId:"G-46K5FJNNQS"}),o=(0,s.xI)(n),l=(0,i.aU)(n)},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},38255:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/oddball-tech-challenge/src/app/signup/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/oddball-tech-challenge/src/app/signup/page.tsx","default")},38395:(e,r,t)=>{Promise.resolve().then(t.bind(t,78808))},46675:e=>{"use strict";e.exports=require("firebase-admin")},53666:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"608173103742f32efd1da892360db73cdaaef122a6":()=>a.nS,"60c8117a3370da6824c0381d4887ab7b65956f0306":()=>a.pp,"70e925b67c25380f93af1d62da2a372c12b796522a":()=>a.g1});var a=t(17616)},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},78808:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>I});var a=t(60687),s=t(43210),i=t(16189),n=t(27605),o=t(63442),l=t(45880),d=t(57782),c=t(75535),u=t(29523),p=t(44493),m=t(80942),f=t(89667),h=t(29867),x=t(11516),b=t(85814),v=t.n(b),g=t(33784),j=t(6475);let w=(0,j.createServerReference)("608173103742f32efd1da892360db73cdaaef122a6",j.callServer,void 0,j.findSourceMapURL,"sendPendingApprovalEmail"),A=(0,j.createServerReference)("70e925b67c25380f93af1d62da2a372c12b796522a",j.callServer,void 0,j.findSourceMapURL,"sendNewUserAdminNotification"),y=l.Ik({name:l.Yj().min(2,{message:"Name must be at least 2 characters."}),email:l.Yj().email({message:"Please enter a valid email."}),password:l.Yj().min(6,{message:"Password must be at least 6 characters."})});function I(){let e=(0,i.useRouter)(),{toast:r}=(0,h.dj)(),[t,l]=(0,s.useState)(!1),b=(0,n.mN)({resolver:(0,o.u)(y),defaultValues:{name:"",email:"",password:""}});async function j(t){l(!0);try{let a=(await (0,d.eJ)(g.j,t.email,t.password)).user;await (0,d.r7)(a,{displayName:t.name});let s=(0,c.rJ)(g.db,"users"),i=(0,c.P)(s,(0,c.AB)(1)),n=(await (0,c.GG)(i)).empty,o=process.env.NEXT_PUBLIC_ADMIN_EMAIL;o||console.error("Admin email is not configured. Cannot send admin notification.");let u=(0,c.H9)(g.db,"users",a.uid);try{await (0,c.BN)(u,{uid:a.uid,name:t.name,email:t.email,role:n?"admin":"pending",status:n?"active":"pending-approval",createdAt:new Date}),!n&&(await w(t.email,t.name),o&&await A(o,t.name,t.email))}catch(e){await a.delete(),console.error("Firestore write failed:",e),r({variant:"destructive",title:"Signup Failed",description:"Could not save user data. This might be due to security rules. Please contact an admin."}),l(!1);return}n?(r({title:"Admin Account Created",description:"Welcome! As the first user, you are now an administrator."}),e.push("/dashboard")):(r({title:"Signup Successful",description:"Your account has been created. Please wait for admin approval."}),e.push("/pending-approval"))}catch(e){r({variant:"destructive",title:"Signup Failed",description:"auth/email-already-in-use"===e.code?"This email is already in use. Please try another one or log in.":e.message})}finally{l(!1)}}return(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background px-4",children:(0,a.jsxs)(p.Zp,{className:"w-full max-w-sm",children:[(0,a.jsxs)(p.aR,{children:[(0,a.jsx)(p.ZB,{className:"text-2xl font-headline",children:"Sign Up"}),(0,a.jsx)(p.BT,{children:"Create an account to get started."})]}),(0,a.jsxs)(p.Wu,{children:[(0,a.jsx)(m.lV,{...b,children:(0,a.jsxs)("form",{onSubmit:b.handleSubmit(j),className:"space-y-4",children:[(0,a.jsx)(m.zB,{control:b.control,name:"name",render:({field:e})=>(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"Name"}),(0,a.jsx)(m.MJ,{children:(0,a.jsx)(f.p,{placeholder:"John Doe",...e,autoComplete:"name"})}),(0,a.jsx)(m.C5,{})]})}),(0,a.jsx)(m.zB,{control:b.control,name:"email",render:({field:e})=>(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"Email"}),(0,a.jsx)(m.MJ,{children:(0,a.jsx)(f.p,{type:"email",placeholder:"m@example.com",...e,autoComplete:"email"})}),(0,a.jsx)(m.C5,{})]})}),(0,a.jsx)(m.zB,{control:b.control,name:"password",render:({field:e})=>(0,a.jsxs)(m.eI,{children:[(0,a.jsx)(m.lR,{children:"Password"}),(0,a.jsx)(m.MJ,{children:(0,a.jsx)(f.p,{type:"password",placeholder:"••••••••",...e,autoComplete:"new-password"})}),(0,a.jsx)(m.C5,{})]})}),(0,a.jsxs)(u.$,{type:"submit",className:"w-full",disabled:t,children:[t&&(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Account"]})]})}),(0,a.jsxs)("div",{className:"mt-4 text-center text-sm",children:["Already have an account?"," ",(0,a.jsx)(v(),{href:"/login",className:"underline",children:"Login"})]})]})]})})}},79551:e=>{"use strict";e.exports=require("url")},80942:(e,r,t)=>{"use strict";t.d(r,{lV:()=>u,MJ:()=>v,zB:()=>m,eI:()=>x,lR:()=>b,C5:()=>g});var a=t(60687),s=t(43210),i=t(11329),n=t(27605),o=t(4780),l=t(78148);let d=(0,t(24224).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)(l.b,{ref:t,className:(0,o.cn)(d(),e),...r}));c.displayName=l.b.displayName;let u=n.Op,p=s.createContext({}),m=({...e})=>(0,a.jsx)(p.Provider,{value:{name:e.name},children:(0,a.jsx)(n.xI,{...e})}),f=()=>{let e=s.useContext(p),r=s.useContext(h),{getFieldState:t,formState:a}=(0,n.xW)(),i=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:o}=r;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...i}},h=s.createContext({}),x=s.forwardRef(({className:e,...r},t)=>{let i=s.useId();return(0,a.jsx)(h.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:t,className:(0,o.cn)("space-y-2",e),...r})})});x.displayName="FormItem";let b=s.forwardRef(({className:e,...r},t)=>{let{error:s,formItemId:i}=f();return(0,a.jsx)(c,{ref:t,className:(0,o.cn)(s&&"text-destructive",e),htmlFor:i,...r})});b.displayName="FormLabel";let v=s.forwardRef(({...e},r)=>{let{error:t,formItemId:s,formDescriptionId:n,formMessageId:o}=f();return(0,a.jsx)(i.DX,{ref:r,id:s,"aria-describedby":t?`${n} ${o}`:`${n}`,"aria-invalid":!!t,...e})});v.displayName="FormControl",s.forwardRef(({className:e,...r},t)=>{let{formDescriptionId:s}=f();return(0,a.jsx)("p",{ref:t,id:s,className:(0,o.cn)("text-sm text-muted-foreground",e),...r})}).displayName="FormDescription";let g=s.forwardRef(({className:e,children:r,...t},s)=>{let{error:i,formMessageId:n}=f(),l=i?String(i?.message??""):r;return l?(0,a.jsx)("p",{ref:s,id:n,className:(0,o.cn)("text-sm font-medium text-destructive",e),...t,children:l}):null});g.displayName="FormMessage"},81630:e=>{"use strict";e.exports=require("http")},89667:(e,r,t)=>{"use strict";t.d(r,{p:()=>n});var a=t(60687),s=t(43210),i=t(4780);let n=s.forwardRef(({className:e,type:r,...t},s)=>(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...t}));n.displayName="Input"},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[447,611,658,192,270,434],()=>t(20941));module.exports=a})();